<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>sethfischer</title><link href="http://seth.fischer.nz/" rel="alternate"></link><link href="http://seth.fischer.nz/feeds/drupal.atom.xml" rel="self"></link><id>http://seth.fischer.nz/</id><updated>2014-11-29T20:33:00+13:00</updated><entry><title>Getting started with Drupal 8</title><link href="http://seth.fischer.nz/drupal-8-getting-started/" rel="alternate"></link><updated>2014-11-29T20:33:00+13:00</updated><author><name>Seth Fischer</name></author><id>tag:seth.fischer.nz,2014-11-28:drupal-8-getting-started/</id><summary type="html">&lt;p&gt;Now that &lt;a href="https://www.drupal.org/drupal-8.0"&gt;Drupal 8&lt;/a&gt; is in beta phase it is time for site developers to start
exploring the API. This article describes the installation of configuration of
Drupal 8 using Git and Drush. Bear in mind that as of 2014-11-28 there were 22
&lt;a href="https://www.drupal.org/project/issues/search/drupal?project_issue_followers=&amp;amp;status%5B%5D=1&amp;amp;status%5B%5D=13&amp;amp;status%5B%5D=8&amp;amp;status%5B%5D=14&amp;amp;status%5B%5D=15&amp;amp;status%5B%5D=4&amp;amp;priorities%5B%5D=400&amp;amp;categories%5B%5D=1&amp;amp;categories%5B%5D=2&amp;amp;version%5B%5D=8.x&amp;amp;issue_tags_op=%3D&amp;amp;issue_tags=D8+upgrade+path"&gt;issues tagged with D8 upgrade path&lt;/a&gt; so it may be necessary to rebuild your
site with the next core update.&lt;/p&gt;
&lt;div class="toc"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#before-starting"&gt;Before starting&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#clone-drupal-8"&gt;Clone Drupal 8&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#create-the-files-directory-and-set-permissions"&gt;Create the files directory and set permissions&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#create-database"&gt;Create database&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#site-installation"&gt;Site installation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#configure-a-drush-alias"&gt;Configure a Drush alias&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#install-contrib-modules"&gt;Install contrib modules&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#devel"&gt;Devel&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#examples"&gt;Examples&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#regularly-update-drupal-core"&gt;Regularly update Drupal core&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#additional-resources"&gt;Additional resources&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;h2 id="before-starting"&gt;Before starting&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;set-up a &lt;a href="https://wiki.debian.org/LaMp" title="Setting up a LAMP stack on Debian"&gt;&lt;abbr title="Linux, Apache, MySQL, PHP"&gt;LAMP&lt;/abbr&gt;&lt;/a&gt; or &lt;abbr title="Linux, nginx, MySQL, PHP"&gt;LNMP&lt;/abbr&gt; stack conforming with the
    &lt;a href="https://api.drupal.org/api/drupal/core!INSTALL.txt/8" title="Drupal 8 INSTALL.txt"&gt;Drupal 8 system requirements&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://git-scm.com/book/en/v2/Getting-Started-Installing-Git" title="Installing Git"&gt;install git&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://getcomposer.org/doc/00-intro.md#installation-nix" title="Install Composer on Unix type systems"&gt;install Composer&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;using composer, &lt;a href="https://github.com/drush-ops/drush#installupdate---composer" title="How to install Drush 7.x (dev)"&gt;install Drush 7.x (dev)&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="clone-drupal-8"&gt;Clone Drupal 8&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;git clone -b 8.0.x --single-branch http://git.drupal.org/project/drupal.git
&lt;span class="nv"&gt;$ &lt;/span&gt;git remote rename origin upstream
&lt;span class="nv"&gt;$ &lt;/span&gt;git remote add origin &lt;span class="o"&gt;[&lt;/span&gt;url&lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="nv"&gt;$ &lt;/span&gt;git checkout -b master
&lt;span class="nv"&gt;$ &lt;/span&gt;cp example.gitignore .gitignore
&lt;/pre&gt;&lt;/div&gt;


&lt;h2 id="create-the-files-directory-and-set-permissions"&gt;Create the files directory and set permissions&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;mkdir sites/default/files
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;To work efficiently with drush the files in &lt;code&gt;sites/default/files&lt;/code&gt; should be
writeable both by the web server and command line user. An alternative to
&lt;code&gt;chmod -R 777 sites/default/files&lt;/code&gt; is to use &lt;a href="https://wiki.debian.org/Permissions#Access_Control_Lists_in_Linux" title="Access Control Lists in Linux"&gt;Access Control Lists&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Those familiar with the Symfony 2 documentation will recognise the following
shell commands which have been adapted from the
&lt;a href="http://Symfony.com/doc/2.3/book/installation.html#configuration-and-set-up"&gt;Installing and Configuring Symfony&lt;/a&gt; chapter of the The Symfony Book.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ HTTPDUSER&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt;ps aux &lt;span class="p"&gt;|&lt;/span&gt; grep -E &lt;span class="s1"&gt;&amp;#39;[a]pache|[h]ttpd|[_]www|[w]ww-data|[n]ginx&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; grep -v root &lt;span class="p"&gt;|&lt;/span&gt; head -1 &lt;span class="p"&gt;|&lt;/span&gt; cut -d&lt;span class="se"&gt;\ &lt;/span&gt; -f1&lt;span class="sb"&gt;`&lt;/span&gt;
&lt;span class="nv"&gt;$ &lt;/span&gt;sudo setfacl -R -m u:&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$HTTPDUSER&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;:rwX -m u:&lt;span class="sb"&gt;`&lt;/span&gt;whoami&lt;span class="sb"&gt;`&lt;/span&gt;:rwX sites/default/files
&lt;span class="nv"&gt;$ &lt;/span&gt;sudo setfacl -dR -m u:&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$HTTPDUSER&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;:rwX -m u:&lt;span class="sb"&gt;`&lt;/span&gt;whoami&lt;span class="sb"&gt;`&lt;/span&gt;:rwX sites/default/files
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;code&gt;HTTPDUSER&lt;/code&gt; is usually &lt;code&gt;www-data&lt;/code&gt; on Debian-based distributions.&lt;/p&gt;
&lt;p&gt;Before setting the access control only the drush user will have &lt;code&gt;rw&lt;/code&gt; permissions:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;getfacl sites/default/files
&lt;span class="c"&gt;# file: cache&lt;/span&gt;
&lt;span class="c"&gt;# owner: drushuser&lt;/span&gt;
&lt;span class="c"&gt;# group: drushuser&lt;/span&gt;
user::rwx
group::rwx
other::rwx
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;After setting the access control both the web server user and drush user will
have &lt;code&gt;rw&lt;/code&gt; permissions:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;getfacl sites/default/files
&lt;span class="c"&gt;# file: cache&lt;/span&gt;
&lt;span class="c"&gt;# owner: drushuser&lt;/span&gt;
&lt;span class="c"&gt;# group: drushuser&lt;/span&gt;
user::rwx
user:www-data:rwx
user:drushuser:rwx
group::rwx
mask::rwx
other::rwx
default:user::rwx
default:user:www-data:rwx
default:user:drushuser:rwx
default:group::rwx
default:mask::rwx
default:other::rwx
&lt;/pre&gt;&lt;/div&gt;


&lt;h2 id="create-database"&gt;Create database&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="err"&gt;$&lt;/span&gt; &lt;span class="n"&gt;mysql&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;uroot&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt;
&lt;span class="n"&gt;mysql&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="k"&gt;CREATE&lt;/span&gt; &lt;span class="k"&gt;DATABASE&lt;/span&gt; &lt;span class="n"&gt;db&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="n"&gt;mysql&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="k"&gt;CREATE&lt;/span&gt; &lt;span class="k"&gt;USER&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;dbuser&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;@&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;localhost&amp;#39;&lt;/span&gt; &lt;span class="n"&gt;IDENTIFIED&lt;/span&gt; &lt;span class="k"&gt;BY&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;password&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="n"&gt;mysql&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="k"&gt;GRANT&lt;/span&gt; &lt;span class="k"&gt;ALL&lt;/span&gt; &lt;span class="k"&gt;PRIVILEGES&lt;/span&gt; &lt;span class="k"&gt;ON&lt;/span&gt; &lt;span class="n"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="k"&gt;TO&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;dbuser&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;@&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;localhost&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="n"&gt;mysql&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;FLUSH&lt;/span&gt; &lt;span class="k"&gt;PRIVILEGES&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="n"&gt;mysql&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="err"&gt;\&lt;/span&gt;&lt;span class="n"&gt;q&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2 id="site-installation"&gt;Site installation&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;drush site-install standard --db-url&lt;span class="o"&gt;=&lt;/span&gt;mysql://dbuser:password@localhost/db --site-name&lt;span class="o"&gt;=&lt;/span&gt;drupal8
&lt;span class="nv"&gt;$ &lt;/span&gt;drush upwd admin --password&lt;span class="o"&gt;=&lt;/span&gt;password
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Drupal 8 beta is now configured and you may login with the username "admin" and
password "password".&lt;/p&gt;
&lt;h2 id="configure-a-drush-alias"&gt;Configure a Drush alias&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;cp ~/.composer/vendor/drush/drush/examples/example.aliases.drushrc.php ~/.drush/aliases.drushrc.php
&lt;span class="nv"&gt;$ &lt;/span&gt;drush site-alias @self --full --with-optional &amp;gt;&amp;gt; ~/.drush/aliases.drushrc.php
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Edit &lt;code&gt;~/.drush/aliases.drushrc.php&lt;/code&gt; and enter your site's URI.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cp"&gt;&amp;lt;?php&lt;/span&gt;
&lt;span class="sd"&gt;/**&lt;/span&gt;
&lt;span class="sd"&gt; * Drupal 8 beta&lt;/span&gt;
&lt;span class="sd"&gt; */&lt;/span&gt;
&lt;span class="nv"&gt;$aliases&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;drupal8&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;array&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
  &lt;span class="s1"&gt;&amp;#39;root&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;/var/www/drupal8&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
  &lt;span class="s1"&gt;&amp;#39;uri&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;http://drupal8&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
  &lt;span class="s1"&gt;&amp;#39;#name&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;drupal8&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
  &lt;span class="s1"&gt;&amp;#39;path-aliases&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; 
  &lt;span class="k"&gt;array&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="s1"&gt;&amp;#39;%drush&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;/home/seth/.composer/vendor/drush/drush&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s1"&gt;&amp;#39;%site&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;sites/default/&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
  &lt;span class="p"&gt;),&lt;/span&gt;
&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Check that your system meets the minimum core requirements:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;drush @drupal8 core-requirements
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Check the status of the site installation by running &lt;code&gt;drush @drupal8 status&lt;/code&gt;.
The output will be similar to the following:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;drush @drupal8 status
 Drupal version         :  8.0.0-dev
 Site URI               :  http://drupal8
 Database driver        :  mysql
 Database hostname      :  localhost
 Database port          :
 Database username      :  drupal8
 Database name          :  drupal8
 Database               :  Connected
 Drupal bootstrap       :  Successful
 Drupal user            :  Anonymous
 Default theme          :  bartik
 Administration theme   :  seven
 PHP executable         :  /usr/bin/php
 PHP configuration      :  /etc/php5/cli/php.ini
 PHP OS                 :  Linux
 Drush version          :  7.0-dev
 Drush temp directory   :  /tmp
 Drush configuration    :
 Drush &lt;span class="nb"&gt;alias &lt;/span&gt;files      :  /home/user/.drush/aliases.drushrc.php
 Drupal root            :  /var/www/drupal8
 Site path              :  sites/default
 File directory path    :  sites/default/files
 Temporary file         :  /tmp
 directory path
 Active config path     :  sites/default/files/config_jP-uX_4rcMWllW18FM124krsM
                           An44d1rdD2t5zXZLAaQcrXQjUATnoTTQ5gtw-iH5fqcmlTFCQ/ac
                           tive
 Staging config path    :  sites/default/files/config_jP-uX_4rcMWllW18FM124krsM
                           An44d1rdD2t5zXZLAaQcrXQjUATnoTTQ5gtw-iH5fqcmlTFCQ/st
                           aging
&lt;/pre&gt;&lt;/div&gt;


&lt;h2 id="install-contrib-modules"&gt;Install contrib modules&lt;/h2&gt;
&lt;p&gt;Two useful modules for developers are &lt;a href="https://www.drupal.org/project/devel"&gt;devel&lt;/a&gt; and &lt;a href="https://www.drupal.org/project/examples"&gt;examples&lt;/a&gt;.&lt;/p&gt;
&lt;h3 id="devel"&gt;Devel&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;drush @drupal8 pm-download devel
&lt;span class="nv"&gt;$ &lt;/span&gt;drush @drupal8 pm-enable devel
&lt;/pre&gt;&lt;/div&gt;


&lt;h3 id="examples"&gt;Examples&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;drush @drupal8 pm-download examples
&lt;span class="nv"&gt;$ &lt;/span&gt;drush @drupal8 pm-enable examples
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The single command &lt;code&gt;drush @drupal8 pm-enable module&lt;/code&gt; will download module (if
required) before enabling it.&lt;/p&gt;
&lt;h2 id="regularly-update-drupal-core"&gt;Regularly update Drupal core&lt;/h2&gt;
&lt;p&gt;As the Drupal 8 pushes on through beta releases you should regularly merge in
the latest code:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="o"&gt;(&lt;/span&gt;master&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;git checkout master
&lt;span class="o"&gt;(&lt;/span&gt;master&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;git fetch upstream
&lt;span class="o"&gt;(&lt;/span&gt;master&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;git merge 8.0.x
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Remember to rebuild the site after each merge:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;drush cache-rebuild
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Before all issues tagged with "D8 upgrade path" have been closed you may find
that you are required to repeat the site installation commands as described
above after updating Drupal core.&lt;/p&gt;
&lt;h2 id="additional-resources"&gt;Additional resources&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://www.drupal.org/node/803746"&gt;Building a Drupal site with Git&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://gitref.org/"&gt;Git Reference&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</summary><category term="Drupal 8"></category><category term="Drupal"></category></entry></feed>