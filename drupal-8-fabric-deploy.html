<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns# fb: https://www.facebook.com/2008/fbml">
<head>
    <title>Deploying Drupal 8 with Fabric - sethfischer</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">



<link rel="canonical" href="http://seth.fischer.nz/drupal-8-fabric-deploy.html">

        <meta name="author" content="Seth Fischer" />
        <meta name="keywords" content="Drupal 8,Drupal,Fabric,Python" />
        <meta name="description" content="An automated build and deployment process saves time and, more importantly, provides a safeguard against failed deployments. Fabric is a tool that can be used to automate application deployment and related tasks. This article describes using Fabric to deploy a Drupal 8 site." />

        <meta property="og:site_name" content="sethfischer" />
        <meta property="og:type" content="article"/>
        <meta property="og:title" content="Deploying Drupal 8 with Fabric"/>
        <meta property="og:url" content="http://seth.fischer.nz/drupal-8-fabric-deploy.html"/>
        <meta property="og:description" content="An automated build and deployment process saves time and, more importantly, provides a safeguard against failed deployments. Fabric is a tool that can be used to automate application deployment and related tasks. This article describes using Fabric to deploy a Drupal 8 site."/>
        <meta property="article:published_time" content="2015-02-06" />
            <meta property="article:section" content="Drupal" />
            <meta property="article:tag" content="Drupal 8" />
            <meta property="article:tag" content="Drupal" />
            <meta property="article:tag" content="Fabric" />
            <meta property="article:tag" content="Python" />
            <meta property="article:author" content="Seth Fischer" />


        <link href="http://seth.fischer.nz/theme/css/styles.7ebb2c04.min.css" rel="stylesheet" />

        <link href="http://seth.fischer.nz/feeds/all.atom.xml" type="application/atom+xml" rel="alternate"
              title="sethfischer ATOM Feed"/>



        <link href="http://seth.fischer.nz/feeds/drupal.atom.xml" type="application/atom+xml" rel="alternate"
              title="sethfischer Drupal ATOM Feed"/>

</head>
<body>

<nav class="navbar navbar-default navbar-fixed-top" role="navigation">
	<div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="http://seth.fischer.nz/" class="navbar-brand">
sethfischer            </a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                         <li><a href="http://seth.fischer.nz/pages/about.html">
                             About
                          </a></li>
                        <li class="active">
                            <a href="http://seth.fischer.nz/category/drupal.html">Drupal</a>
                        </li>
                        <li >
                            <a href="http://seth.fischer.nz/category/misc.html">Misc</a>
                        </li>
                        <li >
                            <a href="http://seth.fischer.nz/category/symfony.html">Symfony</a>
                        </li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
              <li><a href="http://seth.fischer.nz/archives.html"><i class="fa fa-th-list"></i> Archives</a></li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</nav> <!-- /.navbar -->
<!-- Banner -->
<!-- End Banner -->
<div class="container">
    <div class="row">
        <main id="main" class="col-sm-9" role="main">
    <article id="content" role="article">
        <header class="page-header">
            <h1>Deploying Drupal 8 with Fabric</h1>
        </header>
<footer class="post-info">
    <dl class="dl-horizontal">
        <dt>Date</dt>
        <dd>
            <time datetime="2015-02-06T09:38:00+13:00">06 February 2015</time>
        </dd>
            <dt>Tags</dt>
            <dd>
                <a href="http://seth.fischer.nz/tag/drupal-8.html">Drupal 8</a>
                    /
                <a href="http://seth.fischer.nz/tag/drupal.html">Drupal</a>
                    /
                <a href="http://seth.fischer.nz/tag/fabric.html">Fabric</a>
                    /
                <a href="http://seth.fischer.nz/tag/python.html">Python</a>
            </dd>
            <dt>On GitHub</dt>
            <dd>
                <div class="btn-group btn-group-xs" role="group" aria-label="...">
                    <a class="btn btn-default btn-sm" href="https://github.com/sethfischer/sethfischer.github.io/commits/source/content/drupal/drupal-8-fabric-deploy.md" role="button"><i class="fa fa-history"></i> History</a>
                    <a class="btn btn-default btn-sm" href="https://github.com/sethfischer/sethfischer.github.io" role="button"><i class="fa fa-eye"></i> Watch</a>
                    <a class="btn btn-default btn-sm" href="https://github.com/sethfischer/sethfischer.github.io/issues/new?title=drupal/drupal-8-fabric-deploy.md" role="button"><i class="fa fa-exclamation"></i> New issue</a>
                </div>
            </dd>
    </dl>


    
</footer><!-- /.post-info -->        <div class="entry-content">
            <p>An automated build and deployment process saves time and, more importantly,
provides a safeguard against failed deployments. <a href="http://www.fabfile.org/">Fabric</a> is a tool that can
be used to automate application deployment and related tasks. This article
describes using Fabric to deploy a Drupal&nbsp;8 site.</p>
<p>Visit <a href="https://github.com/sethfischer/fabric-deploy">github.com/sethfischer/fabric-deploy</a> for the most recent version of
the fabfile which is an adaptation of <a href="https://github.com/halcyonCorsair/fabric-deploy">fabric-deploy by halcyonCorsair</a> — a
fabfile for the deployment of Drupal&nbsp;7 sites.</p>
<div class="toc">
<ul>
<li><a href="#drupal-project-structure">Drupal project structure</a><ul>
<li><a href="#synchronise-site-uuid-across-instances">Synchronise site UUID across instances</a></li>
<li><a href="#exclude-files-from-release-tarball">Exclude files from release tarball</a></li>
</ul>
</li>
<li><a href="#target-host-configuration">Target host configuration</a><ul>
<li><a href="#user-account">User account</a></li>
<li><a href="#directory-structure">Directory structure</a></li>
<li><a href="#dependencies">Dependencies</a></li>
<li><a href="#manual-configuration">Manual configuration</a></li>
</ul>
</li>
<li><a href="#fabfile">Fabfile</a><ul>
<li><a href="#configuration">Configuration</a></li>
<li><a href="#available-commands">Available commands</a></li>
<li><a href="#usage">Usage</a></li>
<li><a href="#source-code">Source code</a></li>
</ul>
</li>
<li><a href="#further-reading">Further reading</a></li>
</ul>
</div>
<h2 id="drupal-project-structure">Drupal project structure</h2>
<p>The fabfile is designed to deploy a site having a project structure as
described in <a href="http://seth.fischer.nz/drupal-8-workflow-using-git-subtree-merging.html">A Drupal&nbsp;8 workflow using the Git subtree merge strategy</a>,
but may be easily adapted to accommodate another project structure.</p>
<h3 id="synchronise-site-uuid-across-instances">Synchronise site <abbr title="Universally unique identifier">UUID</abbr> across instances</h3>
<p>So that configuration can be shared between instances of the site (development,
staging, production) they must share a common <abbr title="Universally unique identifier">UUID</abbr>.</p>
<div class="highlight"><pre><span class="gp">$</span> drush cget system.site
<span class="go">uuid: cdd9a662-e53d-0944-be57-8765c04d38f1</span>
<span class="go">name: example.com</span>
<span class="go">mail: admin@example.com</span>
<span class="go">slogan: &#39;&#39;</span>
<span class="go">page:</span>
<span class="go">  403: &#39;&#39;</span>
<span class="go">  404: &#39;&#39;</span>
<span class="go">  front: node</span>
<span class="go">admin_compact_mode: false</span>
<span class="go">weight_select_max: 100</span>
<span class="go">langcode: en</span>
</pre></div>


<p>The site <abbr title="Universally unique identifier">UUID</abbr> may be edited with the command <code>drush cedit system.site</code>. For a
robust approach to synchronising UUIDs across instances of a site see
<a href="http://dcycleproject.org/blog/68/approach-code-driven-development-drupal-8">An approach to code-driven development in Drupal 8</a> by <a href="https://github.com/alberto56/">Albert Albala</a>.</p>
<h3 id="exclude-files-from-release-tarball">Exclude files from release tarball</h3>
<p>As an enhancement files can be excluded from the release tarball by including a
<code>.gitattributes</code> file in the root of the repository and specifying the
<a href="http://git-scm.com/book/en/v2/Customizing-Git-Git-Attributes#Exporting-Your-Repository">export-ignore attribute</a> for files that should not be included in the
release. Use this
<a href="https://gist.github.com/sethfischer/bdda9753837ab1da680a">.gitattributes export-ignore template for Druapl&nbsp;8 projects</a>.</p>
<h2 id="target-host-configuration">Target host configuration</h2>
<h3 id="user-account">User account</h3>
<p>The user who executes the deployment must have ssh access to the target host
and permissions to execute commands as both the <code>root</code> and web server user —
usually <code>www-data</code> on Debian–based systems.</p>
<h3 id="directory-structure">Directory structure</h3>
<p>Variable data such as the Drupal <code>files/</code> directory, <code>settings.php</code>, and
<code>services.yml</code> is located in <code>/var/lib/www/example.com/</code>.</p>
<div class="highlight"><pre><span class="gp">$</span> tree -AF /var/lib/www/example.com/
<span class="go">/var/lib/www/example.com/</span>
<span class="go">├── files/</span>
<span class="go">├── services.yml</span>
<span class="go">└── settings.php</span>
</pre></div>


<p>The Drupal site code base is installed in <code>/var/www/</code> with symlinks to the
variable data being created during deployment.</p>
<div class="highlight"><pre><span class="gp">$</span> tree -AFL <span class="m">4</span> /var/www/example.com/
<span class="go">/var/www/example.com/</span>
<span class="go">├── current -&gt; /var/www/example.com/releases/tag_x/</span>
<span class="go">└── releases/</span>
<span class="go">    └── tag_x/</span>
<span class="go">        ├── config/</span>
<span class="go">        │   ├── active/</span>
<span class="go">        │   ├── deploy/</span>
<span class="go">        │   └── staging/</span>
<span class="go">        ├── drupal/</span>
<span class="go">        │   ├── composer.json</span>
<span class="go">        │   ├── core/</span>
<span class="go">        │   ├── example.gitignore</span>
<span class="go">        │   ├── index.php</span>
<span class="go">        │   ├── modules/</span>
<span class="go">        │   ├── profiles/</span>
<span class="go">        │   ├── README.txt</span>
<span class="go">        │   ├── robots.txt</span>
<span class="go">        │   ├── sites/</span>
<span class="go">        │   ├── themes/</span>
<span class="go">        │   └── web.config</span>
<span class="go">        └── README.md</span>

<span class="gp">$</span> tree -AFL /var/www/example.com/releases/tag_x/drupal/sites/default/
<span class="go">/var/www/example.com/releases/tag_x/drupal/sites/default/</span>
<span class="go">├── files -&gt; /var/lib/www/uat.reptiles.veri.co.nz/files/</span>
<span class="go">├── services.yml -&gt; /var/lib/www/uat.reptiles.veri.co.nz/services.yml</span>
<span class="go">└── settings.php -&gt; /var/lib/www/uat.reptiles.veri.co.nz/settings.php</span>
</pre></div>


<h3 id="dependencies">Dependencies</h3>
<p>The following tools must be installed on the target host:</p>
<ul>
<li><a href="https://wiki.debian.org/SSH">OpenSSH server</a></li>
<li><a href="http://docs.drush.org/en/master/install/#composer-one-drush-for-all-projects">Drush</a></li>
</ul>
<h3 id="manual-configuration">Manual configuration</h3>
<p>The database, <code>settings.php</code> and <code>services.yml</code> must be manually created on the
target host before the first deployment.</p>
<p>Create the database and database user:</p>
<div class="highlight"><pre><span class="gp">$</span> ssh host
<span class="gp">$</span> mysql -uroot -p
<span class="go">mysql&gt; CREATE DATABASE db;</span>
<span class="go">mysql&gt; CREATE USER &#39;dbuser&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;password&#39;;</span>
<span class="go">mysql&gt; GRANT ALL PRIVILEGES ON db.* TO &#39;dbuser&#39;@&#39;localhost&#39;;</span>
<span class="go">mysql&gt; FLUSH PRIVILEGES;</span>
<span class="go">mysql&gt; \q</span>
</pre></div>


<p>Copy <code>sites/default/settings.php</code> and <code>sites/default/services.yml</code>to the target
host and edit as appropriate according to the environment.</p>
<div class="highlight"><pre><span class="gp">$</span> scp settings.php host:/var/lib/www/example.com/settings.php
<span class="gp">$</span> scp services.yml host:/var/lib/www/example.com/services.yml
</pre></div>


<h2 id="fabfile">Fabfile</h2>
<p>Source code is hosted at <a href="https://github.com/sethfischer/fabric-deploy">github.com/sethfischer/fabric-deploy</a>.</p>
<h3 id="configuration">Configuration</h3>
<p>Configuration is expressed via <a href="http://yaml.org/">YAML</a> with one file per project. Below is an
example configuration file.</p>
<div class="highlight"><pre><span class="c1"># example.yml</span>

<span class="c1"># global configuration common to all environments</span>
<span class="l-Scalar-Plain">_global</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">repository</span><span class="p-Indicator">:</span>     <span class="l-Scalar-Plain">ssh+git://github.com/user/repo.git</span>
    <span class="l-Scalar-Plain">build_dir</span><span class="p-Indicator">:</span>      <span class="l-Scalar-Plain">/home/tmp/builds</span>
    <span class="l-Scalar-Plain">remote_tmp_dir</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">/tmp</span>

<span class="c1"># staging environment</span>
<span class="l-Scalar-Plain">staging</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">hosts</span><span class="p-Indicator">:</span>
        <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">staging.example.com</span>
    <span class="l-Scalar-Plain">remote_tmp_dir</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">/tmp</span>

<span class="c1"># production environment</span>
<span class="l-Scalar-Plain">prod</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">hosts</span><span class="p-Indicator">:</span>
        <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">example.com</span>
</pre></div>


<h3 id="available-commands">Available commands</h3>
<p><code>fab -f drupal8 -l</code> will list the available commands with a short description:</p>
<dl>
<dt>deploy</dt>
<dd>Deploy release</dd>
<dt>init_deploy</dt>
<dd>Deploy initial release</dd>
<dt>init_host</dt>
<dd>Initialise directory structure on target host</dd>
<dt>site</dt>
<dd>Load configuration from YAML file</dd>
</dl>
<h3 id="usage">Usage</h3>
<p>Initialise directory structure on the <code>uat</code> host of <code>example.com</code>:</p>
<div class="highlight"><pre><span class="gp">$</span> fab -f drupal8 site:example.com,uat init_host
</pre></div>


<p>Deploy <code>tag_x</code> for <code>example.com</code> to <code>uat</code>:</p>
<div class="highlight"><pre><span class="gp">$</span> fab -f drupal8 site:example.com,uat deploy:tag_x
</pre></div>


<h3 id="source-code">Source code</h3>
<p>For the latest code <code>git clone https://github.com/sethfischer/fabric-deploy</code> or
<a href="https://github.com/sethfischer/fabric-deploy/fork">create a fork</a>.</p>
<div class="highlight"><pre><span class="c"># -*- coding: utf-8 -*-</span>
<span class="sd">&quot;&quot;&quot;Fabric deploy for Drupal 8</span>

<span class="sd">https://github.com/sethfischer/fabric-deploy</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">os</span>

<span class="kn">from</span> <span class="nn">fabric.api</span> <span class="kn">import</span> <span class="n">env</span><span class="p">,</span> <span class="n">lcd</span><span class="p">,</span> <span class="n">local</span><span class="p">,</span> <span class="n">put</span><span class="p">,</span> <span class="n">run</span><span class="p">,</span> <span class="n">runs_once</span><span class="p">,</span> <span class="n">settings</span><span class="p">,</span> <span class="n">sudo</span><span class="p">,</span> \
    <span class="n">task</span>
<span class="kn">from</span> <span class="nn">fabric.colors</span> <span class="kn">import</span> <span class="n">red</span>
<span class="kn">from</span> <span class="nn">fabric.utils</span> <span class="kn">import</span> <span class="n">abort</span><span class="p">,</span> <span class="n">warn</span>
<span class="kn">import</span> <span class="nn">yaml</span>


<span class="nd">@task</span>
<span class="nd">@runs_once</span>
<span class="k">def</span> <span class="nf">site</span><span class="p">(</span><span class="n">site_name</span><span class="p">,</span> <span class="n">tier</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Load configuration from YAML file</span>
<span class="sd">    :param site_name: Site name</span>
<span class="sd">    :type site_name: str</span>
<span class="sd">    :param tier: Staging tier</span>
<span class="sd">    :type tier: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">env</span><span class="o">.</span><span class="n">site_name</span> <span class="o">=</span> <span class="n">site_name</span>
    <span class="n">env</span><span class="o">.</span><span class="n">tier</span> <span class="o">=</span> <span class="n">tier</span>

    <span class="n">site_config_filename</span> <span class="o">=</span> <span class="s">&#39;config/{site_name}.yml&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">**</span><span class="n">env</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">site_config_file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">site_config_filename</span><span class="p">,</span> <span class="s">&#39;r&#39;</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">IOError</span><span class="p">:</span>
        <span class="n">abort</span><span class="p">(</span><span class="s">&#39;Unable to read {site_config_filename}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="n">site_config_filename</span><span class="o">=</span><span class="n">site_config_filename</span><span class="p">))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">site_config_data</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">safe_load</span><span class="p">(</span><span class="n">site_config_file</span><span class="p">)</span>
        <span class="n">site_config_file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

        <span class="n">global_config_data</span> <span class="o">=</span> <span class="n">site_config_data</span><span class="p">[</span><span class="s">&#39;_global&#39;</span><span class="p">]</span>
        <span class="n">env</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">global_config_data</span><span class="p">)</span>

        <span class="n">tier_config_data</span> <span class="o">=</span> <span class="n">site_config_data</span><span class="p">[</span><span class="n">tier</span><span class="p">]</span>
        <span class="n">env</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">tier_config_data</span><span class="p">)</span>

        <span class="n">env</span><span class="o">.</span><span class="n">site_build_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">env</span><span class="o">.</span><span class="n">build_dir</span><span class="p">,</span> <span class="n">env</span><span class="o">.</span><span class="n">site_name</span><span class="p">)</span>
        <span class="n">env</span><span class="o">.</span><span class="n">site_repo_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">env</span><span class="o">.</span><span class="n">site_build_dir</span><span class="p">,</span> <span class="s">&#39;repo&#39;</span><span class="p">)</span>
        <span class="n">env</span><span class="o">.</span><span class="n">tar_basename</span> <span class="o">=</span> <span class="s">&#39;{site_name}.tar&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">**</span><span class="n">env</span><span class="p">)</span>
        <span class="n">env</span><span class="o">.</span><span class="n">tar_gz_basename</span> <span class="o">=</span> <span class="s">&#39;{tar_basename}.gz&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">**</span><span class="n">env</span><span class="p">)</span>
        <span class="n">env</span><span class="o">.</span><span class="n">tar_pathname</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
            <span class="n">env</span><span class="o">.</span><span class="n">site_build_dir</span><span class="p">,</span> <span class="n">env</span><span class="o">.</span><span class="n">tar_basename</span><span class="p">)</span>
        <span class="n">env</span><span class="o">.</span><span class="n">tar_gz_pathname</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
            <span class="n">env</span><span class="o">.</span><span class="n">site_build_dir</span><span class="p">,</span> <span class="n">env</span><span class="o">.</span><span class="n">tar_gz_basename</span><span class="p">)</span>


<span class="nd">@task</span>
<span class="k">def</span> <span class="nf">init_host</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Initialise directory structure on target host&quot;&quot;&quot;</span>
    <span class="n">project_dir</span> <span class="o">=</span> <span class="s">&#39;/var/www/{host}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">**</span><span class="n">env</span><span class="p">)</span>
    <span class="n">release_dir</span> <span class="o">=</span> <span class="s">&#39;{project_dir}/releases&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">project_dir</span><span class="o">=</span><span class="n">project_dir</span><span class="p">)</span>
    <span class="n">data_dir</span> <span class="o">=</span> <span class="s">&#39;/var/lib/www/{host}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">**</span><span class="n">env</span><span class="p">)</span>

    <span class="n">sudo</span><span class="p">(</span><span class="s">&#39;mkdir -p {release_dir}/&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">release_dir</span><span class="o">=</span><span class="n">release_dir</span><span class="p">))</span>
    <span class="n">sudo</span><span class="p">(</span><span class="s">&#39;chown -R www-data:www-data {project_dir}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
        <span class="n">project_dir</span><span class="o">=</span><span class="n">project_dir</span><span class="p">))</span>

    <span class="n">sudo</span><span class="p">(</span><span class="s">&#39;mkdir -p {data_dir}/files&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">data_dir</span><span class="o">=</span><span class="n">data_dir</span><span class="p">))</span>
    <span class="n">sudo</span><span class="p">(</span><span class="s">&#39;chown -R www-data:www-data {data_dir}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">data_dir</span><span class="o">=</span><span class="n">data_dir</span><span class="p">))</span>

    <span class="n">warn</span><span class="p">(</span><span class="s">&#39;Database must be manually created.&#39;</span><span class="p">)</span>
    <span class="n">warn</span><span class="p">(</span><span class="s">&#39;{data_dir}/settings.php must be manually created.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
        <span class="n">data_dir</span><span class="o">=</span><span class="n">data_dir</span><span class="p">))</span>
    <span class="n">warn</span><span class="p">(</span><span class="s">&#39;{data_dir}/services.yml must be manually created.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
        <span class="n">data_dir</span><span class="o">=</span><span class="n">data_dir</span><span class="p">))</span>


<span class="nd">@task</span>
<span class="k">def</span> <span class="nf">init_deploy</span><span class="p">(</span><span class="n">tag</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Deploy initial release</span>
<span class="sd">    :param tag: Git tags from which to build release</span>
<span class="sd">    :type tag: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">build_exists</span><span class="p">(</span><span class="n">tag</span><span class="p">)</span>
    <span class="n">build</span><span class="p">(</span><span class="n">tag</span><span class="p">)</span>
    <span class="n">upload</span><span class="p">()</span>
    <span class="n">extract</span><span class="p">()</span>
    <span class="n">symlink_settings</span><span class="p">()</span>
    <span class="n">symlink_release</span><span class="p">()</span>
    <span class="n">run_drush</span><span class="p">(</span><span class="s">&#39;state-set system.maintenance 1&#39;</span><span class="p">)</span>
    <span class="n">run_drush</span><span class="p">(</span><span class="s">&#39;config-import deploy&#39;</span><span class="p">)</span>
    <span class="n">run_drush</span><span class="p">(</span><span class="s">&#39;updatedb&#39;</span><span class="p">)</span>
    <span class="n">run_drush</span><span class="p">(</span><span class="s">&#39;cache-rebuild&#39;</span><span class="p">)</span>
    <span class="n">run_drush</span><span class="p">(</span><span class="s">&#39;state-set system.maintenance 0&#39;</span><span class="p">)</span>


<span class="nd">@task</span>
<span class="k">def</span> <span class="nf">deploy</span><span class="p">(</span><span class="n">tag</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Deploy release</span>
<span class="sd">    :param tag: Git tags from which to build release</span>
<span class="sd">    :type tag: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">build_exists</span><span class="p">(</span><span class="n">tag</span><span class="p">)</span>
    <span class="n">build</span><span class="p">(</span><span class="n">tag</span><span class="p">)</span>
    <span class="n">upload</span><span class="p">()</span>
    <span class="n">extract</span><span class="p">()</span>
    <span class="n">run_drush</span><span class="p">(</span><span class="s">&#39;state-set system.maintenance 1&#39;</span><span class="p">)</span>
    <span class="n">symlink_settings</span><span class="p">()</span>
    <span class="n">symlink_release</span><span class="p">()</span>
    <span class="n">run_drush</span><span class="p">(</span><span class="s">&#39;config-import deploy&#39;</span><span class="p">)</span>
    <span class="n">run_drush</span><span class="p">(</span><span class="s">&#39;updatedb&#39;</span><span class="p">)</span>
    <span class="n">run_drush</span><span class="p">(</span><span class="s">&#39;cache-rebuild&#39;</span><span class="p">)</span>
    <span class="n">run_drush</span><span class="p">(</span><span class="s">&#39;state-set system.maintenance 0&#39;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">make_dirs</span><span class="p">(</span><span class="n">directory</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Create directories recursively</span>
<span class="sd">    :param directory: Directory to be created</span>
<span class="sd">    :type directory: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">directory</span><span class="p">):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">directory</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">build_exists</span><span class="p">(</span><span class="n">tag</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test if release has previously been deployed</span>
<span class="sd">    :param tag: Git tags from which to build release</span>
<span class="sd">    :type tag: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">project_dir</span> <span class="o">=</span> <span class="s">&#39;/var/www/{host}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">**</span><span class="n">env</span><span class="p">)</span>
    <span class="n">release_dir</span> <span class="o">=</span> <span class="s">&#39;{project_dir}/releases&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">project_dir</span><span class="o">=</span><span class="n">project_dir</span><span class="p">)</span>

    <span class="k">with</span> <span class="n">settings</span><span class="p">(</span><span class="n">warn_only</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">run</span><span class="p">(</span><span class="s">&#39;! test -d {release_dir}/{tag}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="n">release_dir</span><span class="o">=</span><span class="n">release_dir</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="n">tag</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">result</span><span class="o">.</span><span class="n">failed</span><span class="p">:</span>
            <span class="n">abort</span><span class="p">(</span><span class="n">red</span><span class="p">(</span><span class="s">&#39;Release has previously been deployed.&#39;</span><span class="p">))</span>


<span class="nd">@runs_once</span>
<span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="n">tag</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Build release tarball</span>
<span class="sd">    :param tag: Git tags from which to build release</span>
<span class="sd">    :type tag: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">env</span><span class="o">.</span><span class="n">release_tag</span> <span class="o">=</span> <span class="n">tag</span>

    <span class="n">make_dirs</span><span class="p">(</span><span class="n">env</span><span class="o">.</span><span class="n">site_repo_dir</span><span class="p">)</span>

    <span class="k">with</span> <span class="n">lcd</span><span class="p">(</span><span class="n">env</span><span class="o">.</span><span class="n">site_repo_dir</span><span class="p">):</span>
        <span class="k">with</span> <span class="n">settings</span><span class="p">(</span><span class="n">warn_only</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
            <span class="n">inside_work_tree</span> <span class="o">=</span> <span class="n">local</span><span class="p">(</span><span class="s">&#39;git rev-parse --is-inside-work-tree&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">inside_work_tree</span><span class="o">.</span><span class="n">failed</span><span class="p">:</span>
            <span class="n">local</span><span class="p">(</span><span class="s">&#39;git clone {repository} .&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">**</span><span class="n">env</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">local</span><span class="p">(</span><span class="s">&#39;git pull&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">succeeded</span><span class="p">:</span>
            <span class="n">local</span><span class="p">((</span><span class="s">&#39;git archive &#39;</span>
                   <span class="s">&#39;--format=tar &#39;</span>
                   <span class="s">&#39;--output={tar_pathname} &#39;</span>
                   <span class="s">&#39;--prefix={release_tag}/ &#39;</span>
                   <span class="s">&#39;{release_tag}&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">**</span><span class="n">env</span><span class="p">))</span>
            <span class="n">local</span><span class="p">(</span><span class="s">&#39;gzip --force -9 {tar_pathname}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">**</span><span class="n">env</span><span class="p">))</span>


<span class="k">def</span> <span class="nf">upload</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Copy tarball to target host&quot;&quot;&quot;</span>
    <span class="n">put</span><span class="p">(</span><span class="n">env</span><span class="o">.</span><span class="n">tar_gz_pathname</span><span class="p">,</span> <span class="n">env</span><span class="o">.</span><span class="n">remote_tmp_dir</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">extract</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Extract tarball into release directory&quot;&quot;&quot;</span>
    <span class="n">project_dir</span> <span class="o">=</span> <span class="s">&#39;/var/www/{host}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">**</span><span class="n">env</span><span class="p">)</span>
    <span class="n">release_dir</span> <span class="o">=</span> <span class="s">&#39;{project_dir}/releases&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">project_dir</span><span class="o">=</span><span class="n">project_dir</span><span class="p">)</span>

    <span class="k">with</span> <span class="n">settings</span><span class="p">(</span><span class="n">sudo_user</span><span class="o">=</span><span class="s">&#39;www-data&#39;</span><span class="p">):</span>
        <span class="n">tar_cmd</span> <span class="o">=</span> <span class="p">(</span><span class="s">&#39;tar &#39;</span>
                   <span class="s">&#39;--gzip &#39;</span>
                   <span class="s">&#39;--extract &#39;</span>
                   <span class="s">&#39;--verbose &#39;</span>
                   <span class="s">&#39;--file {remote_tmp_dir}/{tar_gz_basename} &#39;</span>
                   <span class="s">&#39;--directory {release_dir}/&#39;</span><span class="p">)</span>
        <span class="n">sudo</span><span class="p">(</span><span class="n">tar_cmd</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="n">remote_tmp_dir</span><span class="o">=</span><span class="n">env</span><span class="o">.</span><span class="n">remote_tmp_dir</span><span class="p">,</span>
            <span class="n">tar_gz_basename</span><span class="o">=</span><span class="n">env</span><span class="o">.</span><span class="n">tar_gz_basename</span><span class="p">,</span>
            <span class="n">release_dir</span><span class="o">=</span><span class="n">release_dir</span><span class="p">))</span>

    <span class="n">run</span><span class="p">(</span><span class="s">&#39;rm {remote_tmp_dir}/{tar_gz_basename}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">**</span><span class="n">env</span><span class="p">))</span>


<span class="k">def</span> <span class="nf">symlink_settings</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Symlink configuration files and variable data&quot;&quot;&quot;</span>
    <span class="n">project_dir</span> <span class="o">=</span> <span class="s">&#39;/var/www/{host}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">**</span><span class="n">env</span><span class="p">)</span>
    <span class="n">release_dir</span> <span class="o">=</span> <span class="s">&#39;{project_dir}/releases&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">project_dir</span><span class="o">=</span><span class="n">project_dir</span><span class="p">)</span>
    <span class="n">sites_default</span> <span class="o">=</span> <span class="s">&#39;{release_dir}/{release_tag}/drupal/sites/default&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
        <span class="n">release_dir</span><span class="o">=</span><span class="n">release_dir</span><span class="p">,</span>
        <span class="n">release_tag</span><span class="o">=</span><span class="n">env</span><span class="o">.</span><span class="n">release_tag</span><span class="p">)</span>
    <span class="n">data_dir</span> <span class="o">=</span> <span class="s">&#39;/var/lib/www/{host}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">**</span><span class="n">env</span><span class="p">)</span>

    <span class="k">with</span> <span class="n">settings</span><span class="p">(</span><span class="n">sudo_user</span><span class="o">=</span><span class="s">&#39;www-data&#39;</span><span class="p">):</span>
        <span class="n">files_target</span> <span class="o">=</span> <span class="s">&#39;{data_dir}/files&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">data_dir</span><span class="o">=</span><span class="n">data_dir</span><span class="p">)</span>
        <span class="n">files_dir</span> <span class="o">=</span> <span class="s">&#39;{sites_default}/files&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">sites_default</span><span class="o">=</span><span class="n">sites_default</span><span class="p">)</span>

        <span class="n">sudo</span><span class="p">(</span><span class="s">&#39;ln -nfs {files_target} {files_dir}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="n">files_target</span><span class="o">=</span><span class="n">files_target</span><span class="p">,</span>
            <span class="n">files_dir</span><span class="o">=</span><span class="n">files_dir</span><span class="p">))</span>

        <span class="n">settings_target</span> <span class="o">=</span> <span class="s">&#39;{data_dir}/settings.php&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">data_dir</span><span class="o">=</span><span class="n">data_dir</span><span class="p">)</span>
        <span class="n">settings_file</span> <span class="o">=</span> <span class="s">&#39;{sites_default}/settings.php&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="n">sites_default</span><span class="o">=</span><span class="n">sites_default</span><span class="p">)</span>

        <span class="n">sudo</span><span class="p">(</span><span class="s">&#39;ln -nfs {settings_target} {settings_file}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="n">settings_target</span><span class="o">=</span><span class="n">settings_target</span><span class="p">,</span>
            <span class="n">settings_file</span><span class="o">=</span><span class="n">settings_file</span><span class="p">))</span>

        <span class="n">services_target</span> <span class="o">=</span> <span class="s">&#39;{data_dir}/services.yml&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">data_dir</span><span class="o">=</span><span class="n">data_dir</span><span class="p">)</span>
        <span class="n">services_file</span> <span class="o">=</span> <span class="s">&#39;{sites_default}/services.yml&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="n">sites_default</span><span class="o">=</span><span class="n">sites_default</span><span class="p">)</span>

        <span class="n">sudo</span><span class="p">(</span><span class="s">&#39;ln -nfs {services_target} {services_file}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="n">services_target</span><span class="o">=</span><span class="n">services_target</span><span class="p">,</span>
            <span class="n">services_file</span><span class="o">=</span><span class="n">services_file</span><span class="p">))</span>

    <span class="n">sudo</span><span class="p">(</span><span class="s">&#39;chown www-data:www-data {settings_target}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
        <span class="n">settings_target</span><span class="o">=</span><span class="n">settings_target</span><span class="p">))</span>
    <span class="n">sudo</span><span class="p">(</span><span class="s">&#39;chmod 0400 {settings_target}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
        <span class="n">settings_target</span><span class="o">=</span><span class="n">settings_target</span><span class="p">))</span>

    <span class="n">sudo</span><span class="p">(</span><span class="s">&#39;chown www-data:www-data {services_target}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
        <span class="n">services_target</span><span class="o">=</span><span class="n">services_target</span><span class="p">))</span>
    <span class="n">sudo</span><span class="p">(</span><span class="s">&#39;chmod 0400 {services_target}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
        <span class="n">services_target</span><span class="o">=</span><span class="n">services_target</span><span class="p">))</span>


<span class="k">def</span> <span class="nf">symlink_release</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Symlink release&quot;&quot;&quot;</span>
    <span class="n">release_dir</span> <span class="o">=</span> <span class="s">&#39;/var/www/{host}/releases/{release_tag}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">**</span><span class="n">env</span><span class="p">)</span>
    <span class="n">current</span> <span class="o">=</span> <span class="s">&#39;/var/www/{host}/current&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">**</span><span class="n">env</span><span class="p">)</span>
    <span class="k">with</span> <span class="n">settings</span><span class="p">(</span><span class="n">sudo_user</span><span class="o">=</span><span class="s">&#39;www-data&#39;</span><span class="p">):</span>
        <span class="n">sudo</span><span class="p">(</span><span class="s">&#39;ln -nfs {release_dir} {current}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="n">release_dir</span><span class="o">=</span><span class="n">release_dir</span><span class="p">,</span>
            <span class="n">current</span><span class="o">=</span><span class="n">current</span><span class="p">))</span>


<span class="k">def</span> <span class="nf">run_drush</span><span class="p">(</span><span class="n">command</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Run a Drush command</span>
<span class="sd">    :param command: Drush command to run</span>
<span class="sd">    :type command: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="n">settings</span><span class="p">(</span><span class="n">sudo_user</span><span class="o">=</span><span class="s">&#39;www-data&#39;</span><span class="p">):</span>
        <span class="n">sudo</span><span class="p">(</span><span class="s">&#39;drush -u 1 -y -r {drupal_root} {command}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="n">drupal_root</span><span class="o">=</span><span class="s">&#39;/var/www/{host}/current/drupal&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">**</span><span class="n">env</span><span class="p">),</span>
            <span class="n">command</span><span class="o">=</span><span class="n">command</span><span class="p">))</span>
</pre></div>


<h2 id="further-reading">Further reading</h2>
<ul>
<li><a href="http://www.drushcommands.com/drush-7x/">Drush 7.x commands</a></li>
<li><a href="http://docs.fabfile.org/en/1.10/">Fabric’s documentation</a></li>
<li><a href="https://www.drupal.org/node/1613424">Drupal core issue: Allow a site to be installed from existing configuration</a></li>
<li><a href="https://www.drupal.org/documentation/administer/config">Managing configuration in Drupal 8</a></li>
</ul>
        </div>
    </article>
        </main>
            <aside  id="sidebar" class="col-sm-3 well well-sm" role="complementary">

<h2 class="sr-only">Miscellaneous links and navigation</h2>

    <ul class="list-group">
        <li class="list-group-item">
            <span class="sidebar-heading"><i class="fa fa-code-fork fa-lg"></i> Code</span>
            <ul class="list-group" id="social">
                    <li class="list-group-item"><a href="https://github.com/sethfischer"><i class="fa fa-github fa-lg"></i> GitHub</a></li>
                    <li class="list-group-item"><a href="https://bitbucket.org/sethfischer"><i class="fa fa-bitbucket fa-lg"></i> Bitbucket</a></li>
                    <li class="list-group-item"><a href="https://drupal.org/u/sethfischer"><i class="fa fa-drupal fa-lg"></i> Drupal</a></li>
            </ul>
        </li>
    </ul>

    <ul class="list-group">
        <li class="list-group-item">
            <span class="sidebar-heading"><i class="fa fa-clock-o fa-lg"></i> Recent articles</span>
            <nav>
                <ul class="list-group" id="recentposts">
                    <li class="list-group-item">
                        <a href="http://seth.fischer.nz/symfony-2-latex-pdf-service.html">
                            Symfony 2 PDF service using LaTeX
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="http://seth.fischer.nz/optimising-page-speed-case-study.html">
                            Optimising page speed: A case study
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="http://seth.fischer.nz/drupal-8-fabric-deploy.html">
                            Deploying Drupal 8 with Fabric
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="http://seth.fischer.nz/drupal-8-workflow-using-git-subtree-merging.html">
                            A Drupal 8 workflow using the Git subtree merge strategy
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="http://seth.fischer.nz/drupal-8-getting-started.html">
                            Getting started with Drupal 8
                        </a>
                    </li>
                </ul>
            </nav>
        </li>
    </ul>


    <ul class="list-group">
        <li class="list-group-item">
<a href="http://seth.fischer.nz/tags.html">            <span class="sidebar-heading"><i class="fa fa-tags fa-lg"></i> Tags</span>
</a>            <nav>
                <ul class="list-group" id="tags">
                        <li class="list-group-item tag-1">
                            <a href="http://seth.fischer.nz/tag/drupal-8.html">
                                Drupal 8
                            </a>
                        </li>
                        <li class="list-group-item tag-1">
                            <a href="http://seth.fischer.nz/tag/drupal.html">
                                Drupal
                            </a>
                        </li>
                        <li class="list-group-item tag-4">
                            <a href="http://seth.fischer.nz/tag/python.html">
                                Python
                            </a>
                        </li>
                        <li class="list-group-item tag-4">
                            <a href="http://seth.fischer.nz/tag/fabric.html">
                                Fabric
                            </a>
                        </li>
                        <li class="list-group-item tag-4">
                            <a href="http://seth.fischer.nz/tag/symfony-2.html">
                                Symfony 2
                            </a>
                        </li>
                </ul>
            </nav>
        </li>
    </ul>

    <ul class="list-group">
        <li class="list-group-item">
            <span class="sidebar-heading"><i class="fa fa-github fa-lg"></i> GitHub repositories</span>

            <dl id="github-repos">
                    <dt>
                        <a href="https://github.com/sethfischer/DrupalConsole">DrupalConsole</a>
                            <small>PHP</small>
                    </dt>
                    <dd>
                        <small>Drupal Console</small>
                    </dd>
                    <dt>
                        <a href="https://github.com/sethfischer/dotfiles">dotfiles</a>
                            <small>Shell</small>
                    </dt>
                    <dd>
                        <small>Seth Fischer's dot files.</small>
                    </dd>
                    <dt>
                        <a href="https://github.com/sethfischer/fabric-deploy">fabric-deploy</a>
                            <small>Python</small>
                    </dt>
                    <dd>
                        <small>Fabric deploy scripts.</small>
                    </dd>
                    <dt>
                        <a href="https://github.com/sethfischer/lastbackup">lastbackup</a>
                            <small>PHP</small>
                    </dt>
                    <dd>
                        <small>A SquirrelMail plug-in to display the time of the most recent backup.</small>
                    </dd>
                    <dt>
                        <a href="https://github.com/sethfischer/latex-intro-cli">latex-intro-cli</a>
                            <small>TeX</small>
                    </dt>
                    <dd>
                        <small>An introduction to LaTeX and a selection of command line tools for producing PDF documents.</small>
                    </dd>
                    <dt>
                        <a href="https://github.com/sethfischer/mundo-flags">mundo-flags</a>
                            <small>Shell</small>
                    </dt>
                    <dd>
                        <small>A collection of flags for the countries specified in ISO 3166-1.</small>
                    </dd>
                    <dt>
                        <a href="https://github.com/sethfischer/mundo-names">mundo-names</a>
                            <small>Shell</small>
                    </dt>
                    <dd>
                        <small>A project to translate the names of countries defined in ISO 3166-1.</small>
                    </dd>
                    <dt>
                        <a href="https://github.com/sethfischer/mundoplugs-data">mundoplugs-data</a>
                    </dt>
                    <dd>
                        <small>Data for http://mundoplugs.com/, an electrical guide for travelers.</small>
                    </dd>
                    <dt>
                        <a href="https://github.com/sethfischer/mundoplugs-l10n">mundoplugs-l10n</a>
                    </dt>
                    <dd>
                        <small>Translations for http://mundoplugs.com/, an electrical guide for travelers.</small>
                    </dd>
                    <dt>
                        <a href="https://github.com/sethfischer/pelican-bootstrap3">pelican-bootstrap3</a>
                            <small>CSS</small>
                    </dt>
                    <dd>
                        <small>Customised Bootstrap 3 theme for http://seth.fischer.nz/.</small>
                    </dd>
                    <dt>
                        <a href="https://github.com/sethfischer/sethfischer.github.io">sethfischer.github.io</a>
                            <small>Makefile</small>
                    </dt>
                    <dd>
                        <small>Seth Fischer's personal website http://seth.fischer.nz/.</small>
                    </dd>
            </dl>

                <a href="https://github.com/sethfischer">@sethfischer</a> on GitHub
        </li>
    </ul>
            </aside>
    </div>
</div>
<footer class="container" role="contentinfo">
    <hr>
    <p>
        &copy; 2015 Seth Fischer            


    <span prefix="dct: http://purl.org/dc/terms/ cc: http://creativecommons.org/ns#">Content
licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.
    </span>

    </p>
</footer>
    <script src="http://seth.fischer.nz/theme/js/scripts.6cd69145.min.js"></script>


    <!-- Google Analytics Universal -->
    <script type="text/javascript">
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-59343172-1', 'auto');
        ga('send', 'pageview');
    </script>
    <!-- End Google Analytics Universal Code -->

</body>
</html>